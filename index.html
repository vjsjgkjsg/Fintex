<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üí≥ –ú–æ–π –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ö–æ–Ω—Ç—Ä–æ–ª—å</title>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<link rel="icon" href="icons/icon-192.png">
<meta name="theme-color" content="#020617">

<!-- CSS -->
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/themes.css">
<link rel="stylesheet" href="css/animations.css">

</head>
<body class="dark">

<header>
  <h1>üí≥ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ö–æ–Ω—Ç—Ä–æ–ª—å</h1>
  <div id="balance">–ë–∞–ª–∞–Ω—Å: 0 ‚Ç∏</div>
  <!-- –ò–∫–æ–Ω–∫–∞ —Å–º–µ–Ω—ã —Ç–µ–º—ã -->
  <div id="themeToggle" onclick="UI.toggleTheme()">üåô</div>
</header>

<!-- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–µ–Ω—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
<div id="categories"></div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π -->
<div class="modal" id="modal">
  <div class="top">
    <b id="modalTitle"></b>
    <span onclick="UI.closeModal()">‚úï</span>
  </div>
  <div class="content">
    <div class="month-filter">
      <select id="monthFilter" onchange="Filters.filterByMonth(this.value)">
        <option value="all">–í—Å–µ –º–µ—Å—è—Ü—ã</option>
      </select>
    </div>

    <input id="amount" type="number" placeholder="–°—É–º–º–∞">
    <input id="comment" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π">

    <div class="quick">
      <button onclick="Records.quickAdd(1000)">+1000</button>
      <button onclick="Records.quickAdd(5000)">+5000</button>
    </div>

    <button onclick="Records.add()">–î–æ–±–∞–≤–∏—Ç—å</button>

    <input id="searchInput" type="text" placeholder="–ü–æ–∏—Å–∫..." oninput="Filters.search(this.value)">
    <select id="sortSelect" onchange="Filters.sort(this.value)">
      <option value="newest">–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
      <option value="oldest">–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</option>
    </select>

    <ul id="recordsList"></ul>

    <button onclick="ExportData.exportJSON()">–≠–∫—Å–ø–æ—Ä—Ç JSON</button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è PIN -->
<div class="modal" id="pinModal">
  <div class="top"><b>–í–≤–µ–¥–∏—Ç–µ PIN</b></div>
  <div class="content">
    <input id="pinInput" type="password" placeholder="PIN">
    <button onclick="Auth.checkPin()">–í–æ–π—Ç–∏</button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
<div class="modal" id="createCategoryModal">
  <div class="top"><b>–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</b> <span onclick="UI.closeCreate()">‚úï</span></div>
  <div class="content">
    <input id="newCategoryName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏">
    <select id="newCategoryType">
      <option value="income">–î–æ—Ö–æ–¥</option>
      <option value="spent">–†–∞—Å—Ö–æ–¥</option>
      <option value="debt">–î–æ–ª–≥</option>
    </select>
    <input type="color" id="newCategoryColor" value="#60a5fa">
    <button onclick="Categories.create()">–°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
  </div>
</div>

<!-- JS -->
<script src="js/storage.js"></script>
<script src="js/auth.js"></script>
<script src="js/categories.js"></script>
<script src="js/records.js"></script>
<script src="js/balance.js"></script>
<script src="js/filters.js"></script>
<script src="js/ui.js"></script>
<script src="js/export.js"></script>
<script src="js/analytics.js"></script>
<script src="js/app.js"></script>

<script>
const UI = {
  toggleTheme() {
    document.body.classList.toggle("dark");
    document.body.classList.toggle("light");
    const icon = document.getElementById("themeToggle");
    icon.textContent = document.body.classList.contains("dark") ? "üåô" : "‚òÄÔ∏è";
  },
  closeModal() { document.getElementById('modal').classList.remove('show'); },
  closeCreate() { document.getElementById('createCategoryModal').classList.remove('show'); }
};
</script>

</body>
</html>
