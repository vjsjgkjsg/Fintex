<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üí≥ –ú–æ–π –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ö–æ–Ω—Ç—Ä–æ–ª—å</title>

<!-- CSS -->
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/themes.css">
<link rel="stylesheet" href="css/animations.css">

</head>
<body class="dark">

<header>
  <h1>üí≥ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ö–æ–Ω—Ç—Ä–æ–ª—å</h1>
  <div id="balance">–ë–∞–ª–∞–Ω—Å: 0 ‚Ç∏</div>
  <!-- –ö–Ω–æ–ø–∫–∞ —Å–º–µ–Ω—ã —Ç–µ–º—ã -->
  <div id="themeToggle">üåô</div>
</header>

<!-- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
<div id="categories"></div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π -->
<div class="modal" id="modal">
  <div class="top">
    <b id="modalTitle">–ù–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è</b>
    <span onclick="UI.closeModal()">‚úï</span>
  </div>
  <div class="content">
    <input id="amount" type="number" placeholder="–°—É–º–º–∞">
    <input id="comment" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π">
    <div class="quick">
      <button onclick="Records.quickAdd(1000)">+1000</button>
      <button onclick="Records.quickAdd(5000)">+5000</button>
    </div>
    <button onclick="Records.add()">–î–æ–±–∞–≤–∏—Ç—å</button>

    <input id="searchInput" type="text" placeholder="–ü–æ–∏—Å–∫..." oninput="Filters.search(this.value)">
    <select id="sortSelect" onchange="Filters.sort(this.value)">
      <option value="newest">–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
      <option value="oldest">–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</option>
    </select>

    <ul id="recordsList"></ul>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è PIN -->
<div class="modal" id="pinModal">
  <div class="top"><b>–í–≤–µ–¥–∏—Ç–µ PIN</b></div>
  <div class="content">
    <input id="pinInput" type="password" placeholder="PIN">
    <button onclick="Auth.checkPin()">–í–æ–π—Ç–∏</button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
<div class="modal" id="createCategoryModal">
  <div class="top"><b>–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</b> <span onclick="UI.closeCreate()">‚úï</span></div>
  <div class="content">
    <input id="newCategoryName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏">
    <select id="newCategoryType">
      <option value="income">–î–æ—Ö–æ–¥</option>
      <option value="spent">–†–∞—Å—Ö–æ–¥</option>
      <option value="debt">–î–æ–ª–≥</option>
    </select>
    <input type="color" id="newCategoryColor" value="#60a5fa">
    <button onclick="Categories.create()">–°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
  </div>
</div>

<!-- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π JS –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ -->
<script>
const UI = {
  toggleTheme() {
    document.body.classList.toggle("dark");
    document.body.classList.toggle("light");
    document.getElementById("themeToggle").textContent = document.body.classList.contains("dark") ? "üåô" : "‚òÄÔ∏è";
  },
  closeModal() { document.getElementById('modal').classList.remove('show'); },
  closeCreate() { document.getElementById('createCategoryModal').classList.remove('show'); }
};

const Records = {
  data: [],
  add() {
    const amount = document.getElementById("amount").value;
    const comment = document.getElementById("comment").value;
    if(!amount) return alert("–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É");
    const record = { amount: +amount, comment };
    this.data.push(record);
    this.render();
    document.getElementById("amount").value = "";
    document.getElementById("comment").value = "";
  },
  quickAdd(value) { document.getElementById("amount").value = value; },
  render() {
    const ul = document.getElementById("recordsList");
    ul.innerHTML = "";
    this.data.forEach((r, i) => {
      const li = document.createElement("li");
      li.innerHTML = `<span>${r.comment} (${r.amount} ‚Ç∏)</span> <span class="trash" onclick="Records.delete(${i})">üóëÔ∏è</span>`;
      ul.appendChild(li);
    });
  },
  delete(i) {
    if(confirm("–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å?")) {
      this.data.splice(i,1);
      this.render();
    }
  }
};

// –ü—Ä–∏–º–µ—Ä–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
const categories = [
  {name:"–î–æ—Ö–æ–¥", icon:"üíµ"},
  {name:"–†–∞—Å—Ö–æ–¥", icon:"üõí"},
  {name:"–î–æ–ª–≥", icon:"üí≥"}
];
const container = document.getElementById("categories");
categories.forEach(c=>{
  const div = document.createElement("div");
  div.className="cat";
  div.innerHTML=`<b>${c.name}</b><small>${c.icon}</small>`;
  container.appendChild(div);
});

const Filters = {
  search(value){ console.log("–ü–æ–∏—Å–∫: ", value); },
  sort(value){ console.log("–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: ", value); }
};
</script>

</body>
</html>
